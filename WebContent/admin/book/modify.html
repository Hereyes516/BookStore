<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="__PUBLIC__/Admin/images/favicon.png" />
    <title>Clean Zone</title>
    <!-- <link rel="stylesheet" type="text/css" href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,400italic,700,800' />
    <link rel="stylesheet" type="text/css" href='http://fonts.googleapis.com/css?family=Raleway:300,200,100' /> -->
    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/Admin/js/bootstrap/dist/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/Admin/js/jquery.gritter/css/jquery.gritter.css" />
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/Admin/fonts/font-awesome-4/css/font-awesome.min.css" />
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    	<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/Admin/js/jquery.nanoscroller/nanoscroller.css" />
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/Admin/js/jquery.easypiechart/jquery.easy-pie-chart.css" />
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/Admin/js/bootstrap.switch/bootstrap-switch.css" />
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/Admin/js/bootstrap.datetimepicker/css/bootstrap-datetimepicker.min.css" />
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/Admin/js/jquery.select2/select2.css" />
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/Admin/js/bootstrap.slider/css/slider.css" />
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/Admin/js/jquery.icheck/skins/square/blue.css" />
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/Admin/js/bootstrap.multiselect/css/bootstrap-multiselect.css" />
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/Admin/js/jquery.multiselect/css/multi-select.css" />
    <!-- Custom styles for this template -->
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/Admin/js/jquery.uploadify/uploadify.css"/>
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/Admin/css/style.css" />
</head>

<body>
    <!-- Fixed navbar -->
    <include file="Public/navbar"/>
    <div id="cl-wrapper" class="fixed-menu">
        <!-- Fixed silder -->
        <include file="Public/sidebar"/>
        <div class="container-fluid" id="pcont">
            <include file="Public/head"/>
            <div class="cl-mcont">
                <div class="row">
                    <div class="col-sm-12 col-md-12">
						<div class="block-flat">
					    	<div class="header">
					    		<h3>修改游戏</h3>
						    </div>
						    <div class="content">
						        <form class="form-horizontal group-border-dashed" action="{:U('__ACTION__', array ( 'game' => $info['game_id'] ) )}" method="post">
						            <div class="form-group">
						                <label class="col-sm-2 col-md-2 control-label">游戏名称</label>
						                <div class="col-sm-6 col-md-6">
						                    <input type="text" name="name" class="form-control" value="{$info.name}">
						                </div>
						            </div>
						            <div class="form-group">
						                <label class="col-sm-2 col-md-2 control-label">游戏拼音</label>
						                <div class="col-sm-6 col-md-6">
						                    <input type="text" name="pinyin" class="form-control" value="{$info.pinyin}">
						                </div>
						            </div>
						            <div class="form-group">
						                <label class="col-sm-2 col-md-2 control-label">游戏Logo</label>
						                <div class="col-sm-6 col-md-6">
						                	<img id="logo" width="120px;" height="120px;" src="{$info.logo_url}" />
											<input type="file" id="uploadLogo" />
											<input type="text" class="hide" name="logo" value="{$info.logo_url}" />
											<a href="javascript:$('#uploadLogo').uploadify('upload','*')">开始上传</a> |
											<a href="javascript:$('#uploadLogo').uploadify('cancel', '*')">取消上传</a>
						                </div>
						            </div>
						            <div class="form-group">
						                <label class="col-sm-2 col-md-2 control-label">游戏文件</label>
						                <div class="col-sm-6 col-md-6">
											<input type="file" id="uploadGame" />
											<a href="javascript:$('#uploadGame').uploadify('upload','*')">开始上传</a> |
											<a href="javascript:$('#uploadGame').uploadify('cancel','*')">取消上传</a>
						                </div>
						            </div>
						            <div class="form-group">
						                <label class="col-sm-2 col-md-2 control-label">游戏URL</label>
						                <div class="col-sm-6 col-md-6">
						                    <input type="text" name="url" class="form-control" value="{$info.url}">
						                </div>
						            </div>
						            <div class="form-group">
						                <label class="col-sm-2 col-md-2 control-label">游戏类别</label>
						                <div class="col-sm-6 col-md-6">
						                    <div class="input-group btn-group">	<span class="input-group-addon"><i class="fa fa-tag"></i></span>
						                        <select id="categorys" class="form-control" name="category">
						                            <foreach name="categorys" item="vo">
						                            	<if condition="$vo.category_id eq $info.category_id ">
							                                <option value="{$vo.category_id}" selected >{$vo.name}</option>
						                            	<else />
							                                <option value="{$vo.category_id}" >{$vo.name}</option>
						                            	</if>
						                            </foreach>
						                        </select>
						                    </div>
						                </div>
						            </div>
						            <div class="form-group">
						                <label class="col-sm-2 col-md-2 control-label">推荐游戏</label>
						                <div class="col-sm-8 col-md-8 recommend">
						                	<eq name="info.recommend" value="1">
						                		<assign name="recommend" value="checked" />
						                		<assign name="unrecommend" value="" />
						                	<else/>
						                		<assign name="recommend" value="" />
						                		<assign name="unrecommend" value="checked" />
						                	</eq>
						                	<div class="col-sm-3 col-md-3">
							                    <label class="radio-inline"><input type="radio" class="icheck" name="recommend" value="0" {$unrecommend} > 一般</label>
						                	</div>
						                    <div class="col-sm-3 col-md-3">
							                    <label class="radio-inline"><input type="radio" class="icheck" name="recommend" value="1" {$recommend} > 推荐</label>
						                    </div>
						                </div>
						            </div>
						            <div class="form-group">
						                <label class="col-sm-2 col-md-2 control-label">精品游戏</label>
						                <div class="col-sm-8 col-md-8">
						                	<eq name="info.boutique" value="1">
						                		<assign name="boutique" value="checked" />
						                		<assign name="unboutique" value="" />
						                	<else/>
						                		<assign name="boutique" value="" />
						                		<assign name="unboutique" value="checked" />
						                	</eq>
						                	<div class="col-sm-3 col-md-3">
						                    	<label class="radio-inline"><input type="radio" class="icheck" name="boutique" value="0" {$unboutique} > 非精品</label>
						                    </div>
						                    <div class="col-sm-3 col-md-3">
						                    	<label class="radio-inline"><input type="radio" class="icheck" name="boutique" value="1" {$boutique} > 精品</label>
						                    </div>
						                </div>
						            </div>
						            <div class="form-group">
						                <label class="col-sm-2 col-md-2 control-label">游戏上架</label>
						                <div class="col-sm-8 col-md-8">
						                	<if condition="$info.shelve eq 0">
						                		<assign name="shelve" value="" />
						                		<assign name="noshelve" value="checked" />
						                		<div class="col-sm-3 col-md-3">
						                    		<label class="radio-inline"><input type="radio" class="icheck" name="shelve" value="0" {$noshelve} > 未上架</label>
							                    </div>
							                    <div class="col-sm-3 col-md-3">
							                    	<label class="radio-inline"><input type="radio" class="icheck" name="shelve" value="1" {$shelve} > 上架</label>
							                    </div>
						                	<elseif condition="$info.shelve eq 1"/>
						                		<assign name="shelve" value="checked" />
						                		<assign name="unshelve" value="" />
						                		<div class="col-sm-3 col-md-3">
						                    		<label class="radio-inline"><input type="radio" class="icheck" name="shelve" value="1" {$shelve} > 已上架</label>
							                    </div>
							                    <div class="col-sm-3 col-md-3">
							                    	<label class="radio-inline"><input type="radio" class="icheck" name="shelve" value="2" {$unshelve} > 下架</label>
							                    </div>
						                	<else />
						                		<assign name="shelve" value="" />
						                		<assign name="unshelve" value="checked" />
							                    <div class="col-sm-3 col-md-3">
							                    	<label class="radio-inline"><input type="radio" class="icheck" name="shelve" value="1" {$shelve} > 上架</label>
							                    </div>
							                    <div class="col-sm-3 col-md-3">
							                    	<label class="radio-inline"><input type="radio" class="icheck" name="shelve" value="2" {$unshelve} > 已下架</label>
							                    </div>
						                	</if>
						                </div>
						            </div>
						            <div class="form-group">
						                <div class="pull-right">
						                    <button type="submit" class="btn btn-success">保存修改</button>
						                    <button type="reset" class="btn btn-default">重置</button>
						                </div>
						            </div>
						        </form>
						    </div>
						</div>
	                </div>
	            </div>
	        </div>
	    </div>
	</div>
    <script type="text/javascript" src="__PUBLIC__/Admin/js/jquery.js"></script>
    <script type="text/javascript" src="__PUBLIC__/Admin/js/jquery.select2/select2.min.js"></script>
    <script type="text/javascript" src="__PUBLIC__/Admin/js/jquery.parsley/dist/parsley.js"></script>
    <script type="text/javascript" src="__PUBLIC__/Admin/js/bootstrap.slider/js/bootstrap-slider.js"></script>
    <script type="text/javascript" src="__PUBLIC__/Admin/js/jquery.nanoscroller/jquery.nanoscroller.js"></script>
    <script type="text/javascript" src="__PUBLIC__/Admin/js/jquery.nestable/jquery.nestable.js"></script>
    <script type="text/javascript" src="__PUBLIC__/Admin/js/behaviour/general.js"></script>
    <script type="text/javascript" src="__PUBLIC__/Admin/js/jquery.ui/jquery-ui.js"></script>
    <script type="text/javascript" src="__PUBLIC__/Admin/js/bootstrap.switch/bootstrap-switch.min.js"></script>
    <script type="text/javascript" src="__PUBLIC__/Admin/js/bootstrap.datetimepicker/js/bootstrap-datetimepicker.min.js"></script>
    <script type="text/javascript" src="__PUBLIC__/Admin/js/jquery.icheck/icheck.min.js"></script>
    <script type="text/javascript" src="__PUBLIC__/Admin/js/bootstrap.multiselect/js/bootstrap-multiselect.js"></script>
    <script type="text/javascript" src="__PUBLIC__/Admin/js/jquery.multiselect/js/jquery.multi-select.js"></script>
    <script type="text/javascript" src="__PUBLIC__/Admin/js/jquery.uploadify/jquery.uploadify.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            //initialize the javascript
            App.init();
            $('#categorys').multiselect({
                enableFiltering: true,
                maxHeight: 250,
                filterPlaceholder: '搜索',
            });
            
            // 上传游戏Logo
        	$("#uploadLogo").uploadify({
        		'auto'				: false,
        		'buttonText'		: '上传游戏文件',
        		'fileTypeExts'		: '*.gif; *.jpg; *.jpeg; *.png;',
        		'fileSizeLimit'		: '1024KB',
        		'preventCaching'	: false,
        		'removeTimeout'		: 3,
        		'removeCompleted'	: false,
        		'multi'				: false,
        		'swf'				: '__PUBLIC__/Admin/js/jquery.uploadify/uploadify.swf',
        		'uploader'			: '__CONTROLLER__/uploadLogo',
        		//'uploadLimit'		: 1,
        		'onUploadSuccess' : function(file, result) {
        			var msg = $.parseJSON(result);
        			if(1 == msg.code){
        				$('#logo').attr('src','__PUBLIC__'+msg.data.url);
        				$('#logo').parent().children('input').val($('#logo').attr('src'));
        			}
        		}
            });
            
        	// 上传游戏文件
        	$("#uploadGame").uploadify({
        		'auto'				: false,
        		'buttonText'		: '上传游戏文件',
        		'fileTypeExts'		: '*.zip;',
        		'fileSizeLimit'		: '10240KB',
        		'preventCaching'	: false,
        		'removeTimeout'		: 3,
        		'removeCompleted'	: false,
        		'multi'				: false,
        		'swf'				: '__PUBLIC__/Admin/js/jquery.uploadify/uploadify.swf',
        		'uploader'			: '__CONTROLLER__/uploadGame',
        		//'uploadLimit'		: 1,
        		'onUploadSuccess' : function(file, result) {
        			var msg = $.parseJSON(result);
        			if( 1 == msg.code ){
        				var url = msg.data.url;
        				var pinyin = msg.data;
        				if($('form div.form-group:eq(1) input').val(url) != null || $('form div.form-group:eq(5) input').val(url) != null){
    	    				$('form div.form-group:eq(1) input').val(url.substr(0, url.indexOf('/')));
	        				$('form div.form-group:eq(4) input').val(url);
        				}
        			} else {
        				alert('上传失败');
        			}
        		}
            });
        });
    </script>
    <!-- Bootstrap core JavaScript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script type="text/javascript" src="__PUBLIC__/Admin/js/behaviour/voice-commands.js"></script>
    <script type="text/javascript" src="__PUBLIC__/Admin/js/bootstrap/dist/js/bootstrap.min.js"></script>
</body>

</html>